<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Configurações - WhatsApp API</title>
  <link rel="stylesheet" href="/css/style.css?v=20260125">
</head>
<body>
  <div class="container container-wide">
    <header class="header">
      <h1>WhatsApp API</h1>
      <div class="header-actions">
        <a href="/" class="btn btn-secondary">Voltar</a>
        <button id="logoutBtn" class="btn btn-secondary">Sair</button>
      </div>
    </header>

    <main class="dashboard">
      <div class="card">
        <h2>Configurações</h2>

        <div id="message" class="message" style="display: none;"></div>

        <form id="settingsForm" class="settings-form">
          <div class="settings-grid">
            <fieldset>
              <legend>Autenticação do Dashboard</legend>

              <div class="form-group">
                <label for="DASH_USER">Usuário</label>
                <input type="text" id="DASH_USER" name="DASH_USER" autocomplete="username">
              </div>

              <div class="form-group">
                <label for="DASH_PASS">Senha</label>
                <input type="password" id="DASH_PASS" name="DASH_PASS" autocomplete="new-password">
                <small>Deixe em branco para manter a senha atual</small>
              </div>
            </fieldset>

            <fieldset>
              <legend>Token da API</legend>

              <div class="form-group">
                <label for="API_TOKEN">Token de Acesso</label>
                <div class="input-with-action">
                  <input type="password" id="API_TOKEN" name="API_TOKEN" autocomplete="off">
                  <button type="button" class="btn-icon btn-copy" data-target="API_TOKEN" title="Mostrar/Copiar">
                    <span class="icon-copy">&#128203;</span>
                  </button>
                </div>
                <small>Deixe em branco para manter o token atual</small>
              </div>
            </fieldset>

            <fieldset>
              <legend>Webhook</legend>

              <div class="form-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="WEBHOOK_ENABLED" name="WEBHOOK_ENABLED">
                  <span>Webhook Habilitado</span>
                </label>
                <small>Quando desabilitado, mensagens recebidas não serão enviadas ao webhook</small>
              </div>

              <div class="form-group">
                <label for="WEBHOOK_URL">URL do Webhook</label>
                <input type="url" id="WEBHOOK_URL" name="WEBHOOK_URL" placeholder="https://seu-servidor.com/webhook">
              </div>

              <div class="form-group">
                <label for="WEBHOOK_TOKEN">Token do Webhook</label>
                <div class="input-with-action">
                  <input type="password" id="WEBHOOK_TOKEN" name="WEBHOOK_TOKEN" autocomplete="off">
                  <button type="button" class="btn-icon btn-copy" data-target="WEBHOOK_TOKEN" title="Mostrar/Copiar">
                    <span class="icon-copy">&#128203;</span>
                  </button>
                </div>
                <small>Deixe em branco para manter o token atual</small>
              </div>
            </fieldset>

            <fieldset>
              <legend>Atendimento Manual</legend>

              <div class="form-group">
                <label for="PAUSE_DURATION_HOURS">Tempo de Pausa do Webhook (horas)</label>
                <input type="number" id="PAUSE_DURATION_HOURS" name="PAUSE_DURATION_HOURS" min="1" max="72" value="4">
                <small>Quando uma mensagem é enviada pelo celular, o webhook fica pausado por este tempo</small>
              </div>
            </fieldset>

            <fieldset class="fieldset-full">
              <legend>Resposta Automática</legend>

              <div class="form-row">
                <div class="form-group">
                  <label class="checkbox-label">
                    <input type="checkbox" id="AUTO_REPLY_ENABLED" name="AUTO_REPLY_ENABLED">
                    <span>Resposta Automática Habilitada</span>
                  </label>
                  <small>Envia uma mensagem automática para novos contatos (1x a cada 12 horas)</small>
                </div>
              </div>

              <div class="form-group">
                <label for="AUTO_REPLY_MESSAGE">Mensagem Automática</label>
                <textarea id="AUTO_REPLY_MESSAGE" name="AUTO_REPLY_MESSAGE" rows="3" placeholder="Olá! Recebemos sua mensagem e em breve retornaremos."></textarea>
                <small>Mensagem enviada automaticamente quando alguém entra em contato</small>
              </div>
            </fieldset>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Salvar Configurações</button>
          </div>
        </form>
      </div>
    </main>
  </div>

  <script src="/js/settings.js?v=20260125"></script>
</body>
</html>
